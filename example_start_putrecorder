#!/bin/sh

# start, or restart, caputRecorder.py

PREFIX=$1
if [ "" == "${PREFIX}" ] ; then
	PREFIX="xxx:"
fi

EPICS_APP=/home/oxygen/MOONEY/epics/synApps/support/xxx
MACROS_PY_DIR=${EPICS_APP}/xxxApp/op/python

output=`perl -s ${EPICS_APP}/release.pl -form=bash ${EPICS_APP}`
eval $output

CAPUTRECORDER_PY=${CAPUTRECORDER}/caputRecorderApp/op/python/caputRecorder.py

arch=`uname -p`
COMMAND="/APSshare/anaconda/${arch}/bin/python ${CAPUTRECORDER_PY}"

cd ${MACROS_PY_DIR}
export PYTHONPATH=${MACROS_PY_DIR}:$PYTHONPATH

# start caputRecorder.py
# The first prefix specifies the caputRecorder.db database instance that will
# function as a user interface for caputRecorder.py, and notify it when a
# caput occurrs.
$COMMAND ${PREFIX}&

# To record caputs to other IOCs, add their prefixes to the command line:
# All IOCs must be running access security configured to trap writes, and
# must load caputRecorder.db.  (You can also control which IOCs are monitored
# from the caputRecorderConfigure display.)
#${COMMAND} yyy: zzz:&

